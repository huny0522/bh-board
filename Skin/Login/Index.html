<?php if(_BH_ !== true) exit;
use \BH_Common as CF;
use \BH_Application as App;

/**
 * @var $Model \MemberModel
 * @var $this \BH_Application
 */
$this->Title = '로그인';

?>
<div id="container">
	<div id="contents" class="login2">
		<div id="login_wrap2">
			<h2>로그인</h2>
			<form id="LoginFrm" name="LoginFrm" action="<?a. 'Login' ?>" method="post">
				<fieldset>
					<?p. $Model->HTMLPrintLabel('email') ?>
					<span class="selectMail">
						<input type="text" name="email1" value="" required>
						<input type="text" name="email2" value="" required class="emailAddr">
						<select name="selectMail">
							<option value="">선택하세요.</option>
							<?p. OptionEmailAddress() ?>
							<option value="x">직접입력</option>
						</select>
					</span>
					<?p. $Model->HTMLPrintLabel('pwd') ?>
					<span><?p. $Model->HTMLPrintInput('pwd') ?></span>
				</fieldset>
				<div id="LoginRemember"><a href="#" id="RemberIDBtn"><i></i>아이디 저장</a></div>
				<div id="LoginConfirm"><button type="submit" class="bbtn btn2">로그인</button></div>
				<div id="link"><a href="<?p. _URL ?>/">메인으로</a><a href="<?p. $this->URLAction('Register') ?>" class="regbtn">회원가입</a></div>
			</form>
		</div>
	</div>
</div>
<script>
	jQuery(function($){
		$(document).ready(function(){
			var email1 = common.getCookie('email1');
			if(email1 != ''){
				$('input[name=email1]').val(email1);
				$('input[name=email2]').val(common.getCookie('email2'));
				$('#RemberIDBtn').addClass('active');
			}

			if(jQuery.trim($('input[name=email1]').val()) == '') $('input[name=email1]').focus();
			else $('input[name=pwd]').focus();
		});

		$(document).on('submit', '#LoginFrm', function(e){
			var res = common.valCHeck(this);
			if(!res) e.preventDefault();

			var email1 = $('input[name=email1]');
			var email2 = $('input[name=email2]');
			if(jQuery.trim(email2.val()) == ''){
				alert('메일을 입력하여 주세요.');
				e.preventDefault();
				return false;
			}
			var pwd = $('input[name=pwd]');

			if($('#RemberIDBtn').hasClass('active')){
				common.setCookie('email1', $('input[name=email1]').val(), 9999);
				common.setCookie('email2', $('input[name=email2]').val(), 9999);
			}else{
				common.setCookie('email1', '1',0);
				common.setCookie('email2', '1',0);
			}
		});

		$(document).on('click', '#RemberIDBtn', function(e){
			e.preventDefault();
			$(this).toggleClass('active');
		});
	});
</script>

