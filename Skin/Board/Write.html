<?php if(_BH_ !== true) exit;
use \BH_Common as CM;
use \BH_Application as App;

/**
 * @var $Ctrl \Controller\Board
 * @var $Model \BoardModel
 */
App::JSAdd('board.js', 200);
?>

<form name="BoardWriteForm" id="BoardWriteForm" method="post" action="<?a. App::$Action ?>/<?php if(App::$Action == 'Modify') echo App::$ID; ?><?fq. '' ?>" enctype="multipart/form-data">
	<input type="hidden" name="htmlis" value="<?p. _MOBILEIS !== true ? 'y' : 'n' ?>">
	<?php if(App::$Action == 'Answer'){ ?>
	<input type="hidden" name="mode" value="answer">
	<input type="hidden" name="target" value="<?p. $_GET['target'] ?>">
	<?php } ?>


	<?php if(isset(App::$Data['error'])){ ?><p class="alert"><?p. App::$Data['error'] ?></p><?php } ?>
	<table class="write">
		<?php if(_MEMBERIS === true && ($Ctrl->managerIs || $_SESSION['member']['level'] == _SADMIN_LEVEL || $_SESSION['member']['level'] == _ADMIN_LEVEL)){ ?>
		<tr>
			<th><?mt('notice')?></th>
			<td>
				<?minp('notice') ?>
			</td>
		</tr>
		<?php } ?>
		<?php if(sizeof(App::$Data['categorys'])){ ?>
		<tr>
			<th><?mt('category')?></th>
			<td>
				<select name="category" required>
					<option value="">선택</option>
					<?php foreach(App::$Data['categorys'] as $cate){ ?>
						<option<?php if($cate == $Model->GetValue('category')){ ?> selected<?php } ?>><?p. $cate ?></option>
					<?php } ?>
				</select>
			</td>
		</tr>
		<?php } ?>
		<tr>
			<th><?mt('secret')?></th>
			<td>
				<?minp('secret') ?>
			</td>
		</tr>

		<?php if(_MEMBERIS !== true || (App::$Action == 'Modify' && !strlen($Model->GetValue('muid')))){?>
			<tr>
				<th><?mt('mname')?></th>
				<td>
					<?minp('mname') ?>
				</td>
			</tr>

			<tr>
				<th><?mt('pwd')?></th>
				<td>
					<?minp('pwd', array('value' =>(App::$Action == 'Modify' ? post('pwd') : ''))) ?>
					<ul class="guide">
						<li>16자 이하로 입력하여주세요.</li>
					</ul>
				</td>
			</tr>
			<?php
			if(App::$Action != 'Modify'){
			?>
			<tr>
				<th>비밀번호 확인</th>
				<td>
					<input type="password" name="pwdchk" value="" required="required" data-same="pwd" data-display="비밀번호 확인">
				</td>
			</tr>
			<?php
			}
			?>
		<?php } ?>
		<tr>
			<th><i class="requiredBullet" title="필수항목">*</i> <?mt('subject')?></th>
			<td>
				<?minp('subject') ?>
				<ul class="guide">
					<li>128자 이하로 입력하여주세요.</li>
				</ul>
			</td>
		</tr>

		<tr>
			<th><?mt('content')?></th>
			<td>
				<?minp('content') ?>
			</td>
		</tr>
		<tr>
			<th><?mt('file1')?></th>
			<td>
				<?minp('file1') ?>
			</td>
		</tr>
	</table>

	<div class="bottomBtn">
		<button type="submit" class="mBtn btn2"><?php echo App::$Action == 'Modify' ? '수정' : '등록'; ?></button>
		<button type="reset" class="mBtn btn1">취소</button>
		<a href="#" class="backbtn mBtn btn1">뒤로</a>
	</div>
</form>


<script>
	App.Board.Write.Init(<?p. _MOBILEIS !== true ? 'true' : 'false' ?>);
</script>
